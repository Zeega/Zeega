{
	"id" : {{ project.getId | default("") | json_encode | raw }}
	{% if project.getSequences() is defined %}
	,"sequences" : [		
	    {% for sequence in project.getSequences() %}	
		{
			"id" : {{ sequence.id | default("") | json_encode | raw}},
			"title" : "{{ sequence.title | default("") }}",
			"attr" : {{sequence.attr | default({}) | json_encode | raw}},
			"persistent_layers" : {{sequence.persistentLayers | default([]) | json_encode | raw}},
			"description" : {{sequence.description | default(null) | json_encode | raw}},
    		"advance_to" : {{sequence.advanceTo | default(null) | json_encode | raw}},
			"frames" : {{sequence.frames | json_encode | raw}}
		}
		{%- if loop.index0 < project.getSequences()|length - 1 -%}
		,
		{%- endif -%}			
		{% endfor %}
	]
	{%- endif -%}
	,"frames" : [
		{% for frame in project.getFrames %}
		{	
			"id" : {{ frame.id | json_encode | raw}},
			"attr" : {{ frame.attr | default({}) | json_encode | raw}},
			"thumbnail_url" : {{ frame.thumbnailUrl | default("") | json_encode | raw}},
			"controllable": {{frame.controllable | default(true) | json_encode | raw}},
			"layers" : {{frame.layers | json_encode | raw}}
		}	
		{%- if loop.index0 < project.getFrames()|length - 1 -%}
		,
		{%- endif -%}			
		{% endfor %}
		
	]
	,"layers":[
		{% for layer in project.getLayers() %}
		{	
			"id" : {{ layer.getId | json_encode | raw}},
			"type" : {{layer.getType | default("") | json_encode | raw}},
			"project_id" : {{ layer.getProjectId | default("") | json_encode | raw}},
			"attr" : {{layer.attr | default([ ]) | json_encode | raw}}
		}	
		{%- if loop.index0 < project.getLayers()|length - 1 -%}
		,
		{%- endif -%}			
		{% endfor %}		
	]
}
